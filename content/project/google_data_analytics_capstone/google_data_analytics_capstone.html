---
date: "2022-07-10T00:00:00Z"
Summary: The Capstone Project for the Google Data Analytics Specialization
Title: Google Data Analytics Capstone
---



<div id="google-data-analytics-capstone-analysis-of-2019-cyclistic-bike-share" class="section level1">
<h1>Google Data Analytics Capstone: Analysis Of 2019 Cyclistic Bike Share</h1>
<div id="prompt" class="section level2">
<h2>Prompt</h2>
<p>“You are a junior data analyst working in the marketing analyst team at Cyclistic, a bike-share company in Chicago. The director of marketing believes the company’s future success depends on maximizing the number of annual memberships. Therefore, your team wants to understand how casual riders and annual members use Cyclistic bikes differently. From these insights, your team will design a new marketing strategy to convert casual riders into annual members. But first, Cyclistic executives must approve your recommendations, so they must be backed up with compelling data insights and professional data visualizations.”</p>
<p><em>Understand how annual members and casual riders differ
</em>Identify trends to know why casual riders would buy annual membership
*To use marketing strategies to convert casual riders to annual members.</p>
<pre class="r"><code># Loading needed R Packages

library(tidyverse) #for analyzing data</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.4.0      ✔ purrr   0.3.5 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.5.0 
## ✔ readr   2.1.3      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(lubridate) #to work with dates</code></pre>
<pre><code>## Loading required package: timechange
## 
## Attaching package: &#39;lubridate&#39;
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code>library(ggplot2) #to create graphs</code></pre>
</div>
<div id="step-1-collect-data" class="section level2">
<h2>STEP 1: COLLECT DATA</h2>
<pre class="r"><code>#Download/import data

q1_2019 &lt;- read.csv(&quot;Divvy_Trips_2019_Q1.csv&quot;)
q2_2019 &lt;- read.csv(&quot;Divvy_Trips_2019_Q2.csv&quot;)
q3_2019 &lt;- read.csv(&quot;Divvy_Trips_2019_Q3.csv&quot;)
q4_2019 &lt;- read.csv(&quot;Divvy_Trips_2019_Q4.csv&quot;)</code></pre>
</div>
<div id="step-2-wrangle-data-and-combine-into-a-single-file" class="section level2">
<h2>STEP 2: WRANGLE DATA AND COMBINE INTO A SINGLE FILE</h2>
<pre class="r"><code># Checking and previewing file names

colnames(q1_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>colnames(q2_2019)</code></pre>
<pre><code>##  [1] &quot;X01...Rental.Details.Rental.ID&quot;                   
##  [2] &quot;X01...Rental.Details.Local.Start.Time&quot;            
##  [3] &quot;X01...Rental.Details.Local.End.Time&quot;              
##  [4] &quot;X01...Rental.Details.Bike.ID&quot;                     
##  [5] &quot;X01...Rental.Details.Duration.In.Seconds.Uncapped&quot;
##  [6] &quot;X03...Rental.Start.Station.ID&quot;                    
##  [7] &quot;X03...Rental.Start.Station.Name&quot;                  
##  [8] &quot;X02...Rental.End.Station.ID&quot;                      
##  [9] &quot;X02...Rental.End.Station.Name&quot;                    
## [10] &quot;User.Type&quot;                                        
## [11] &quot;Member.Gender&quot;                                    
## [12] &quot;X05...Member.Details.Member.Birthday.Year&quot;</code></pre>
<pre class="r"><code>colnames(q3_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>colnames(q4_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>fixed_q2_2019 &lt;- rename(q2_2019, trip_id = &quot;X01...Rental.Details.Rental.ID&quot;, 
                      start_time = &quot;X01...Rental.Details.Local.Start.Time&quot;,
                      end_time = &quot;X01...Rental.Details.Local.End.Time&quot;,
                      bikeid = &quot;X01...Rental.Details.Bike.ID&quot;,
                      tripduration = &quot;X01...Rental.Details.Duration.In.Seconds.Uncapped&quot;,
                      from_station_id = &quot;X03...Rental.Start.Station.ID&quot;,
                      from_station_name = &quot;X03...Rental.Start.Station.Name&quot;,
                      to_station_id = &quot;X02...Rental.End.Station.ID&quot;,
                      to_station_name = &quot;X02...Rental.End.Station.Name&quot;,
                      usertype = &quot;User.Type&quot;,
                      gender = &quot;Member.Gender&quot;,
                      birthyear = &quot;X05...Member.Details.Member.Birthday.Year&quot;)</code></pre>
<pre class="r"><code># Checking and previewing file names after fixing

colnames(q1_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>colnames(fixed_q2_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>colnames(q3_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code>colnames(q4_2019)</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;          &quot;gender&quot;            &quot;birthyear&quot;</code></pre>
<pre class="r"><code># Checking the dataframes

str(q1_2019)</code></pre>
<pre><code>## &#39;data.frame&#39;:    365069 obs. of  12 variables:
##  $ trip_id          : int  21742443 21742444 21742445 21742446 21742447 21742448 21742449 21742450 21742451 21742452 ...
##  $ start_time       : chr  &quot;2019-01-01 00:04:37&quot; &quot;2019-01-01 00:08:13&quot; &quot;2019-01-01 00:13:23&quot; &quot;2019-01-01 00:13:45&quot; ...
##  $ end_time         : chr  &quot;2019-01-01 00:11:07&quot; &quot;2019-01-01 00:15:34&quot; &quot;2019-01-01 00:27:12&quot; &quot;2019-01-01 00:43:28&quot; ...
##  $ bikeid           : int  2167 4386 1524 252 1170 2437 2708 2796 6205 3939 ...
##  $ tripduration     : chr  &quot;390.0&quot; &quot;441.0&quot; &quot;829.0&quot; &quot;1,783.0&quot; ...
##  $ from_station_id  : int  199 44 15 123 173 98 98 211 150 268 ...
##  $ from_station_name: chr  &quot;Wabash Ave &amp; Grand Ave&quot; &quot;State St &amp; Randolph St&quot; &quot;Racine Ave &amp; 18th St&quot; &quot;California Ave &amp; Milwaukee Ave&quot; ...
##  $ to_station_id    : int  84 624 644 176 35 49 49 142 148 141 ...
##  $ to_station_name  : chr  &quot;Milwaukee Ave &amp; Grand Ave&quot; &quot;Dearborn St &amp; Van Buren St (*)&quot; &quot;Western Ave &amp; Fillmore St (*)&quot; &quot;Clark St &amp; Elm St&quot; ...
##  $ usertype         : chr  &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; ...
##  $ gender           : chr  &quot;Male&quot; &quot;Female&quot; &quot;Female&quot; &quot;Male&quot; ...
##  $ birthyear        : int  1989 1990 1994 1993 1994 1983 1984 1990 1995 1996 ...</code></pre>
<pre class="r"><code>str(fixed_q2_2019)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1108163 obs. of  12 variables:
##  $ trip_id          : int  22178529 22178530 22178531 22178532 22178533 22178534 22178535 22178536 22178537 22178538 ...
##  $ start_time       : chr  &quot;2019-04-01 00:02:22&quot; &quot;2019-04-01 00:03:02&quot; &quot;2019-04-01 00:11:07&quot; &quot;2019-04-01 00:13:01&quot; ...
##  $ end_time         : chr  &quot;2019-04-01 00:09:48&quot; &quot;2019-04-01 00:20:30&quot; &quot;2019-04-01 00:15:19&quot; &quot;2019-04-01 00:18:58&quot; ...
##  $ bikeid           : int  6251 6226 5649 4151 3270 3123 6418 4513 3280 5534 ...
##  $ tripduration     : chr  &quot;446.0&quot; &quot;1,048.0&quot; &quot;252.0&quot; &quot;357.0&quot; ...
##  $ from_station_id  : int  81 317 283 26 202 420 503 260 211 211 ...
##  $ from_station_name: chr  &quot;Daley Center Plaza&quot; &quot;Wood St &amp; Taylor St&quot; &quot;LaSalle St &amp; Jackson Blvd&quot; &quot;McClurg Ct &amp; Illinois St&quot; ...
##  $ to_station_id    : int  56 59 174 133 129 426 500 499 211 211 ...
##  $ to_station_name  : chr  &quot;Desplaines St &amp; Kinzie St&quot; &quot;Wabash Ave &amp; Roosevelt Rd&quot; &quot;Canal St &amp; Madison St&quot; &quot;Kingsbury St &amp; Kinzie St&quot; ...
##  $ usertype         : chr  &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; ...
##  $ gender           : chr  &quot;Male&quot; &quot;Female&quot; &quot;Male&quot; &quot;Male&quot; ...
##  $ birthyear        : int  1975 1984 1990 1993 1992 1999 1969 1991 NA NA ...</code></pre>
<pre class="r"><code>str(q3_2019)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1640718 obs. of  12 variables:
##  $ trip_id          : int  23479388 23479389 23479390 23479391 23479392 23479393 23479394 23479395 23479396 23479397 ...
##  $ start_time       : chr  &quot;2019-07-01 00:00:27&quot; &quot;2019-07-01 00:01:16&quot; &quot;2019-07-01 00:01:48&quot; &quot;2019-07-01 00:02:07&quot; ...
##  $ end_time         : chr  &quot;2019-07-01 00:20:41&quot; &quot;2019-07-01 00:18:44&quot; &quot;2019-07-01 00:27:42&quot; &quot;2019-07-01 00:27:10&quot; ...
##  $ bikeid           : int  3591 5353 6180 5540 6014 4941 3770 5442 2957 6091 ...
##  $ tripduration     : chr  &quot;1,214.0&quot; &quot;1,048.0&quot; &quot;1,554.0&quot; &quot;1,503.0&quot; ...
##  $ from_station_id  : int  117 381 313 313 168 300 168 313 43 43 ...
##  $ from_station_name: chr  &quot;Wilton Ave &amp; Belmont Ave&quot; &quot;Western Ave &amp; Monroe St&quot; &quot;Lakeview Ave &amp; Fullerton Pkwy&quot; &quot;Lakeview Ave &amp; Fullerton Pkwy&quot; ...
##  $ to_station_id    : int  497 203 144 144 62 232 62 144 195 195 ...
##  $ to_station_name  : chr  &quot;Kimball Ave &amp; Belmont Ave&quot; &quot;Western Ave &amp; 21st St&quot; &quot;Larrabee St &amp; Webster Ave&quot; &quot;Larrabee St &amp; Webster Ave&quot; ...
##  $ usertype         : chr  &quot;Subscriber&quot; &quot;Customer&quot; &quot;Customer&quot; &quot;Customer&quot; ...
##  $ gender           : chr  &quot;Male&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ birthyear        : int  1992 NA NA NA NA 1990 NA NA NA NA ...</code></pre>
<pre class="r"><code>str(q4_2019)</code></pre>
<pre><code>## &#39;data.frame&#39;:    704054 obs. of  12 variables:
##  $ trip_id          : int  25223640 25223641 25223642 25223643 25223644 25223645 25223646 25223647 25223648 25223649 ...
##  $ start_time       : chr  &quot;2019-10-01 00:01:39&quot; &quot;2019-10-01 00:02:16&quot; &quot;2019-10-01 00:04:32&quot; &quot;2019-10-01 00:04:32&quot; ...
##  $ end_time         : chr  &quot;2019-10-01 00:17:20&quot; &quot;2019-10-01 00:06:34&quot; &quot;2019-10-01 00:18:43&quot; &quot;2019-10-01 00:43:43&quot; ...
##  $ bikeid           : int  2215 6328 3003 3275 5294 1891 1061 1274 6011 2957 ...
##  $ tripduration     : chr  &quot;940.0&quot; &quot;258.0&quot; &quot;850.0&quot; &quot;2,350.0&quot; ...
##  $ from_station_id  : int  20 19 84 313 210 156 84 156 156 336 ...
##  $ from_station_name: chr  &quot;Sheffield Ave &amp; Kingsbury St&quot; &quot;Throop (Loomis) St &amp; Taylor St&quot; &quot;Milwaukee Ave &amp; Grand Ave&quot; &quot;Lakeview Ave &amp; Fullerton Pkwy&quot; ...
##  $ to_station_id    : int  309 241 199 290 382 226 142 463 463 336 ...
##  $ to_station_name  : chr  &quot;Leavitt St &amp; Armitage Ave&quot; &quot;Morgan St &amp; Polk St&quot; &quot;Wabash Ave &amp; Grand Ave&quot; &quot;Kedzie Ave &amp; Palmer Ct&quot; ...
##  $ usertype         : chr  &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; ...
##  $ gender           : chr  &quot;Male&quot; &quot;Male&quot; &quot;Female&quot; &quot;Male&quot; ...
##  $ birthyear        : int  1987 1998 1991 1990 1987 1994 1991 1995 1993 NA ...</code></pre>
<pre class="r"><code># Fixing dataframes

q4_2019 &lt;-  mutate(q4_2019, trip_id = as.character(trip_id)
                   ,bikeid = as.character(bikeid)) 
q3_2019 &lt;-  mutate(q3_2019, trip_id = as.character(trip_id)
                   ,bikeid = as.character(bikeid)) 
fixed_q2_2019 &lt;-  mutate(fixed_q2_2019, trip_id = as.character(trip_id)
                   ,bikeid = as.character(bikeid)) 
q1_2019 &lt;-  mutate(q1_2019, trip_id = as.character(trip_id)
                   ,bikeid = as.character(bikeid)) </code></pre>
<pre class="r"><code># Combining into one big dataframe

all_trips &lt;- bind_rows(q1_2019, fixed_q2_2019, q3_2019, q4_2019)</code></pre>
<pre class="r"><code># Removing unneeded data for this analysis.

all_trips &lt;- all_trips %&gt;%  
  select(-c(birthyear, gender))</code></pre>
</div>
<div id="step-3-clean-up-and-add-data-to-prepare-for-analysis" class="section level2">
<h2>STEP 3: CLEAN UP AND ADD DATA TO PREPARE FOR ANALYSIS</h2>
<pre class="r"><code># Inspecting before cleaning

colnames(all_trips)  #List of column names</code></pre>
<pre><code>##  [1] &quot;trip_id&quot;           &quot;start_time&quot;        &quot;end_time&quot;         
##  [4] &quot;bikeid&quot;            &quot;tripduration&quot;      &quot;from_station_id&quot;  
##  [7] &quot;from_station_name&quot; &quot;to_station_id&quot;     &quot;to_station_name&quot;  
## [10] &quot;usertype&quot;</code></pre>
<pre class="r"><code>nrow(all_trips)  #How many rows are in data frame?</code></pre>
<pre><code>## [1] 3818004</code></pre>
<pre class="r"><code>dim(all_trips)  #Dimensions of the data frame?</code></pre>
<pre><code>## [1] 3818004      10</code></pre>
<pre class="r"><code>head(all_trips)  #See the first 6 rows of data frame.  Also tail(all_trips)</code></pre>
<pre><code>##    trip_id          start_time            end_time bikeid tripduration
## 1 21742443 2019-01-01 00:04:37 2019-01-01 00:11:07   2167        390.0
## 2 21742444 2019-01-01 00:08:13 2019-01-01 00:15:34   4386        441.0
## 3 21742445 2019-01-01 00:13:23 2019-01-01 00:27:12   1524        829.0
## 4 21742446 2019-01-01 00:13:45 2019-01-01 00:43:28    252      1,783.0
## 5 21742447 2019-01-01 00:14:52 2019-01-01 00:20:56   1170        364.0
## 6 21742448 2019-01-01 00:15:33 2019-01-01 00:19:09   2437        216.0
##   from_station_id                   from_station_name to_station_id
## 1             199              Wabash Ave &amp; Grand Ave            84
## 2              44              State St &amp; Randolph St           624
## 3              15                Racine Ave &amp; 18th St           644
## 4             123      California Ave &amp; Milwaukee Ave           176
## 5             173 Mies van der Rohe Way &amp; Chicago Ave            35
## 6              98          LaSalle St &amp; Washington St            49
##                  to_station_name   usertype
## 1      Milwaukee Ave &amp; Grand Ave Subscriber
## 2 Dearborn St &amp; Van Buren St (*) Subscriber
## 3  Western Ave &amp; Fillmore St (*) Subscriber
## 4              Clark St &amp; Elm St Subscriber
## 5        Streeter Dr &amp; Grand Ave Subscriber
## 6        Dearborn St &amp; Monroe St Subscriber</code></pre>
<pre class="r"><code>str(all_trips)  #See list of columns and data types (numeric, character, etc)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3818004 obs. of  10 variables:
##  $ trip_id          : chr  &quot;21742443&quot; &quot;21742444&quot; &quot;21742445&quot; &quot;21742446&quot; ...
##  $ start_time       : chr  &quot;2019-01-01 00:04:37&quot; &quot;2019-01-01 00:08:13&quot; &quot;2019-01-01 00:13:23&quot; &quot;2019-01-01 00:13:45&quot; ...
##  $ end_time         : chr  &quot;2019-01-01 00:11:07&quot; &quot;2019-01-01 00:15:34&quot; &quot;2019-01-01 00:27:12&quot; &quot;2019-01-01 00:43:28&quot; ...
##  $ bikeid           : chr  &quot;2167&quot; &quot;4386&quot; &quot;1524&quot; &quot;252&quot; ...
##  $ tripduration     : chr  &quot;390.0&quot; &quot;441.0&quot; &quot;829.0&quot; &quot;1,783.0&quot; ...
##  $ from_station_id  : int  199 44 15 123 173 98 98 211 150 268 ...
##  $ from_station_name: chr  &quot;Wabash Ave &amp; Grand Ave&quot; &quot;State St &amp; Randolph St&quot; &quot;Racine Ave &amp; 18th St&quot; &quot;California Ave &amp; Milwaukee Ave&quot; ...
##  $ to_station_id    : int  84 624 644 176 35 49 49 142 148 141 ...
##  $ to_station_name  : chr  &quot;Milwaukee Ave &amp; Grand Ave&quot; &quot;Dearborn St &amp; Van Buren St (*)&quot; &quot;Western Ave &amp; Fillmore St (*)&quot; &quot;Clark St &amp; Elm St&quot; ...
##  $ usertype         : chr  &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; &quot;Subscriber&quot; ...</code></pre>
<pre class="r"><code>summary(all_trips)  #Statistical summary of data. Mainly for numerics</code></pre>
<pre><code>##    trip_id           start_time          end_time            bikeid         
##  Length:3818004     Length:3818004     Length:3818004     Length:3818004    
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##  tripduration       from_station_id from_station_name  to_station_id  
##  Length:3818004     Min.   :  1.0   Length:3818004     Min.   :  1.0  
##  Class :character   1st Qu.: 77.0   Class :character   1st Qu.: 77.0  
##  Mode  :character   Median :174.0   Mode  :character   Median :174.0  
##                     Mean   :201.7                      Mean   :202.6  
##                     3rd Qu.:289.0                      3rd Qu.:291.0  
##                     Max.   :673.0                      Max.   :673.0  
##  to_station_name      usertype        
##  Length:3818004     Length:3818004    
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
## </code></pre>
<pre class="r"><code># In the &quot;member_casual&quot; column, replace &quot;Subscriber&quot; with &quot;member&quot; and &quot;Customer&quot; with &quot;casual&quot;

(all_trips &lt;- rename(all_trips
                   ,member_casual = usertype))</code></pre>

<pre class="r"><code>all_trips &lt;-  all_trips %&gt;% 
  mutate(member_casual = recode(member_casual
                           ,&quot;Subscriber&quot; = &quot;member&quot;
                           ,&quot;Customer&quot; = &quot;casual&quot;))</code></pre>
<pre class="r"><code># Checking to make sure the proper number of observations were reassigned

table(all_trips$member_casual)</code></pre>
<pre><code>## 
##  casual  member 
##  880637 2937367</code></pre>
<pre class="r"><code># Adding columns that list the date, month, day, and year of each ride

all_trips$date &lt;- as.Date(all_trips$start_time) #The default format is yyyy-mm-dd
all_trips$month &lt;- format(as.Date(all_trips$date), &quot;%m&quot;)
all_trips$day &lt;- format(as.Date(all_trips$date), &quot;%d&quot;)
all_trips$year &lt;- format(as.Date(all_trips$date), &quot;%Y&quot;)
all_trips$day_of_week &lt;- format(as.Date(all_trips$date), &quot;%A&quot;)</code></pre>
<pre class="r"><code># Adding a &quot;ride_length&quot; calculation to all_trips (in seconds)

all_trips$ride_length &lt;- difftime(all_trips$end_time,all_trips$start_time)</code></pre>
<pre class="r"><code># Inspecting the structure of the columns

str(all_trips)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3818004 obs. of  16 variables:
##  $ trip_id          : chr  &quot;21742443&quot; &quot;21742444&quot; &quot;21742445&quot; &quot;21742446&quot; ...
##  $ start_time       : chr  &quot;2019-01-01 00:04:37&quot; &quot;2019-01-01 00:08:13&quot; &quot;2019-01-01 00:13:23&quot; &quot;2019-01-01 00:13:45&quot; ...
##  $ end_time         : chr  &quot;2019-01-01 00:11:07&quot; &quot;2019-01-01 00:15:34&quot; &quot;2019-01-01 00:27:12&quot; &quot;2019-01-01 00:43:28&quot; ...
##  $ bikeid           : chr  &quot;2167&quot; &quot;4386&quot; &quot;1524&quot; &quot;252&quot; ...
##  $ tripduration     : chr  &quot;390.0&quot; &quot;441.0&quot; &quot;829.0&quot; &quot;1,783.0&quot; ...
##  $ from_station_id  : int  199 44 15 123 173 98 98 211 150 268 ...
##  $ from_station_name: chr  &quot;Wabash Ave &amp; Grand Ave&quot; &quot;State St &amp; Randolph St&quot; &quot;Racine Ave &amp; 18th St&quot; &quot;California Ave &amp; Milwaukee Ave&quot; ...
##  $ to_station_id    : int  84 624 644 176 35 49 49 142 148 141 ...
##  $ to_station_name  : chr  &quot;Milwaukee Ave &amp; Grand Ave&quot; &quot;Dearborn St &amp; Van Buren St (*)&quot; &quot;Western Ave &amp; Fillmore St (*)&quot; &quot;Clark St &amp; Elm St&quot; ...
##  $ member_casual    : chr  &quot;member&quot; &quot;member&quot; &quot;member&quot; &quot;member&quot; ...
##  $ date             : Date, format: &quot;2019-01-01&quot; &quot;2019-01-01&quot; ...
##  $ month            : chr  &quot;01&quot; &quot;01&quot; &quot;01&quot; &quot;01&quot; ...
##  $ day              : chr  &quot;01&quot; &quot;01&quot; &quot;01&quot; &quot;01&quot; ...
##  $ year             : chr  &quot;2019&quot; &quot;2019&quot; &quot;2019&quot; &quot;2019&quot; ...
##  $ day_of_week      : chr  &quot;Tuesday&quot; &quot;Tuesday&quot; &quot;Tuesday&quot; &quot;Tuesday&quot; ...
##  $ ride_length      : &#39;difftime&#39; num  6.5 7.35 13.8166666666667 29.7166666666667 ...
##   ..- attr(*, &quot;units&quot;)= chr &quot;mins&quot;</code></pre>
<pre class="r"><code># Convert &quot;ride_length&quot; from Factor to numeric so we can run calculations on the data

is.factor(all_trips$ride_length)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>all_trips$ride_length &lt;- as.numeric(as.character(all_trips$ride_length))
is.numeric(all_trips$ride_length)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code># Removing &quot;bad&quot; data
# The dataframe includes a few hundred entries when bikes were taken out of docks and checked for quality by Divvy or ride_length was negative

all_trips_v2 &lt;- all_trips[!(all_trips$from_station_name == &quot;HQ QR&quot; | all_trips$ride_length&lt;0),]</code></pre>
</div>
<div id="step-4-conduct-descriptive-analysis" class="section level2">
<h2>STEP 4: CONDUCT DESCRIPTIVE ANALYSIS</h2>
<pre class="r"><code># Descriptive analysis on ride_length (all figures in seconds)

mean(all_trips_v2$ride_length) #straight average (total ride length / rides)</code></pre>
<pre><code>## [1] 24.17517</code></pre>
<pre class="r"><code>median(all_trips_v2$ride_length) #midpoint number in the ascending array of ride lengths</code></pre>
<pre><code>## [1] 11.81667</code></pre>
<pre class="r"><code>max(all_trips_v2$ride_length) #longest ride</code></pre>
<pre><code>## [1] 177140.4</code></pre>
<pre class="r"><code>min(all_trips_v2$ride_length) #shortest ride</code></pre>
<pre><code>## [1] 1.016667</code></pre>
<pre class="r"><code>summary(all_trips_v2$ride_length)</code></pre>
<pre><code>##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
##      1.02      6.85     11.82     24.18     21.40 177140.37</code></pre>
<pre class="r"><code># Comparing members and casual users

aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean)</code></pre>
<pre><code>##   all_trips_v2$member_casual all_trips_v2$ride_length
## 1                     casual                 57.02061
## 2                     member                 14.32799</code></pre>
<pre class="r"><code>aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = median)</code></pre>
<pre><code>##   all_trips_v2$member_casual all_trips_v2$ride_length
## 1                     casual                 25.83333
## 2                     member                  9.80000</code></pre>
<pre class="r"><code>aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = max)</code></pre>
<pre><code>##   all_trips_v2$member_casual all_trips_v2$ride_length
## 1                     casual                 177140.4
## 2                     member                 150943.9</code></pre>
<pre class="r"><code>aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = min)</code></pre>
<pre><code>##   all_trips_v2$member_casual all_trips_v2$ride_length
## 1                     casual                 1.016667
## 2                     member                 1.016667</code></pre>
<pre class="r"><code># Averaging ride time by each day for members vs casual users

aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week, FUN = mean)</code></pre>
<pre><code>##    all_trips_v2$member_casual all_trips_v2$day_of_week all_trips_v2$ride_length
## 1                      casual                   Friday                 60.17759
## 2                      member                   Friday                 13.89761
## 3                      casual                   Monday                 54.50107
## 4                      member                   Monday                 14.24902
## 5                      casual                 Saturday                 54.06457
## 6                      member                 Saturday                 16.30333
## 7                      casual                   Sunday                 56.18907
## 8                      member                   Sunday                 15.40431
## 9                      casual                 Thursday                 59.95171
## 10                     member                 Thursday                 13.77979
## 11                     casual                  Tuesday                 57.41464
## 12                     member                  Tuesday                 14.15271
## 13                     casual                Wednesday                 60.33808
## 14                     member                Wednesday                 13.80984</code></pre>
<pre class="r"><code># Fixing out of order days.

all_trips_v2$day_of_week &lt;- ordered(all_trips_v2$day_of_week, levels=c(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;))</code></pre>
<pre class="r"><code># Averaging ride time by each day for members vs casual users

aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week, FUN = mean)</code></pre>
<pre><code>##    all_trips_v2$member_casual all_trips_v2$day_of_week all_trips_v2$ride_length
## 1                      casual                   Sunday                 56.18907
## 2                      member                   Sunday                 15.40431
## 3                      casual                   Monday                 54.50107
## 4                      member                   Monday                 14.24902
## 5                      casual                  Tuesday                 57.41464
## 6                      member                  Tuesday                 14.15271
## 7                      casual                Wednesday                 60.33808
## 8                      member                Wednesday                 13.80984
## 9                      casual                 Thursday                 59.95171
## 10                     member                 Thursday                 13.77979
## 11                     casual                   Friday                 60.17759
## 12                     member                   Friday                 13.89761
## 13                     casual                 Saturday                 54.06457
## 14                     member                 Saturday                 16.30333</code></pre>
<pre class="r"><code># Analyzing ridership data by type and weekday

all_trips_v2 %&gt;% 
  mutate(weekday = wday(start_time, label = TRUE)) %&gt;%  #creates weekday field using wday()
  group_by(member_casual, weekday) %&gt;%  #groups by usertype and weekday
  summarise(number_of_rides = n()                            #calculates the number of rides and average duration 
  ,average_duration = mean(ride_length)) %&gt;%         # calculates the average duration
  arrange(member_casual, weekday)                                # sorts</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;member_casual&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 14 × 4
## # Groups:   member_casual [2]
##    member_casual weekday number_of_rides average_duration
##    &lt;chr&gt;         &lt;ord&gt;             &lt;int&gt;            &lt;dbl&gt;
##  1 casual        Sun              170173             56.2
##  2 casual        Mon              101489             54.5
##  3 casual        Tue               88655             57.4
##  4 casual        Wed               89745             60.3
##  5 casual        Thu              101372             60.0
##  6 casual        Fri              121141             60.2
##  7 casual        Sat              208056             54.1
##  8 member        Sun              256234             15.4
##  9 member        Mon              458780             14.2
## 10 member        Tue              497025             14.2
## 11 member        Wed              494277             13.8
## 12 member        Thu              486915             13.8
## 13 member        Fri              456966             13.9
## 14 member        Sat              287163             16.3</code></pre>
<div id="visualizing-data" class="section level3">
<h3>Visualizing Data</h3>
<pre class="r"><code># Visualizing the number of rides by rider type

all_trips_v2 %&gt;% 
  mutate(weekday = wday(start_time, label = TRUE)) %&gt;% 
  group_by(member_casual, weekday) %&gt;% 
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %&gt;% 
  arrange(member_casual, weekday)  %&gt;% 
  ggplot(aes(x = weekday, y = number_of_rides, fill = member_casual)) +
  geom_col(position = &quot;dodge&quot;)+
  labs(x = &quot;Weekday&quot;, y =&quot;Number of Rides&quot;,fill = &quot;Member or Casual&quot;,title =&quot;Number of Rides in a Day&quot;) </code></pre>
<pre><code>## `summarise()` has grouped output by &#39;member_casual&#39;. You can override using the
## `.groups` argument.</code></pre>
<p><img src="/project/google_data_analytics_capstone/google_data_analytics_capstone_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<pre class="r"><code># Visualizing for average duration

all_trips_v2 %&gt;% 
  mutate(weekday = wday(start_time, label = TRUE)) %&gt;% 
  group_by(member_casual, weekday) %&gt;% 
  summarise(number_of_rides = n()
            ,average_duration = mean(ride_length)) %&gt;% 
  arrange(member_casual, weekday)  %&gt;% 
  ggplot(aes(x = weekday, y = average_duration, fill = member_casual)) +
  geom_col(position = &quot;dodge&quot;)+
  labs(x = &quot;Weekday&quot;, y =&quot;Trip Duration(seconds)&quot;,fill = &quot;Member or Casual&quot;,title =&quot;Average Duration per Ride&quot;) </code></pre>
<pre><code>## `summarise()` has grouped output by &#39;member_casual&#39;. You can override using the
## `.groups` argument.</code></pre>
<p><img src="/project/google_data_analytics_capstone/google_data_analytics_capstone_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<pre class="r"><code># Month-by-month data

all_trips_v2 %&gt;%
  group_by(month, member_casual) %&gt;%
  summarize(total = n()) %&gt;%
  arrange(month, member_casual) %&gt;%
  ggplot(aes(x = month, y = total, fill = member_casual)) +
  geom_col(position = &quot;dodge&quot;) +
  labs(x = &quot;Months&quot;, y =&quot;Total Rides&quot;,fill = &quot;Member or Casual&quot;,title =&quot;Total Rides per Month&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;month&#39;. You can override using the
## `.groups` argument.</code></pre>
<p><img src="/project/google_data_analytics_capstone/google_data_analytics_capstone_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<pre class="r"><code># Hour-by-hour data

all_trips_v2$start_hour &lt;- as.POSIXct(all_trips_v2$start_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</code></pre>
<pre><code>## Warning in strptime(xx, f, tz = tz): unknown timezone &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre><code>## Warning in as.POSIXct.POSIXlt(x): unknown timezone &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre><code>## Warning in strptime(x, f, tz = tz): unknown timezone &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre><code>## Warning in as.POSIXct.POSIXlt(as.POSIXlt(x, tz, ...), tz, ...): unknown timezone
## &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre class="r"><code># Visualized hour-by-hour data

all_trips_v2 %&gt;%
  group_by(hour_of_day = hour(round_date(start_hour, &#39;hour&#39;))) %&gt;% 
  group_by(hour_of_day, member_casual) %&gt;% 
  summarize(number_of_rides = n(), .groups = &#39;drop&#39;) %&gt;% 
  arrange(-number_of_rides) %&gt;% 
  ggplot(aes(x = hour_of_day, y = number_of_rides, fill = member_casual)) +
  geom_bar(position = &#39;dodge&#39;, stat = &#39;identity&#39;) + scale_y_continuous(labels = scales::comma) +
  scale_x_continuous(breaks = c(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23)) +
  labs(x = &quot;Time of the Day&quot;, y = &quot;Number of Rides&quot;, 
       fill = &quot;Member or Casual&quot;,
       title = &quot;Number of Rides by Hour&quot;)</code></pre>
<pre><code>## Warning in as.POSIXlt.POSIXct(x): unknown timezone &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre><code>## Warning in as.POSIXct.POSIXlt(new): unknown timezone &#39;%Y-%m-%d %H:%M:%S&#39;</code></pre>
<pre><code>## Warning in as.POSIXlt.POSIXct(x, tz = tz(x)): unknown timezone &#39;%Y-%m-%d
## %H:%M:%S&#39;</code></pre>
<p><img src="/project/google_data_analytics_capstone/google_data_analytics_capstone_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
</div>
<div id="step-5-further-analysis" class="section level2">
<h2>STEP 5: FURTHER ANALYSIS</h2>
<div id="findings" class="section level3">
<h3>Findings:</h3>
<ul>
<li>Casual riders spend more time, on average, on the bike service than member riders in a day.</li>
<li>However, member riders use the bikes more on a daily basis (number of daily rides).</li>
<li>The number of daily rides for casual riders gets closer to member riders on weekend.</li>
<li>Month-by-month data shows that it peaks in the summer, and falls off in the other seasons.</li>
<li>Hour-by-hour data shows that there are different trends for each group.</li>
<li>Member riders peak in the morning and afternoon.</li>
<li>Casual riders keep consistent from noon to night.</li>
</ul>
</div>
<div id="end-of-capstone" class="section level3">
<h3>End of Capstone!</h3>
</div>
</div>
</div>
